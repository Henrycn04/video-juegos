\doxysubsection{ECS.\+hpp}
\hypertarget{ECS_8hpp_source}{}\label{ECS_8hpp_source}\index{ECS/ECS.hpp@{ECS/ECS.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ ECS\_HPP}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ ECS\_HPP}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <cstddef>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <bitset>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <memory>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <set>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <deque>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <typeindex>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <unordered\_map>}}
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ "{}../Utils/Pool.hpp"{}}}
\DoxyCodeLine{00014\ }
\DoxyCodeLine{00016\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ MAX\_COMPONENTS\ =\ 64;}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{typedef}\ std::bitset<MAX\_COMPONENTS>\ Signature;}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00025\ \textcolor{keyword}{struct\ }\mbox{\hyperlink{structIComponent}{IComponent}}\ \{}
\DoxyCodeLine{00026\ \textcolor{keyword}{protected}:}
\DoxyCodeLine{00028\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{structIComponent_a91f6e53a91bbb5ae97b2fef28c686b05}{nextId}};}
\DoxyCodeLine{00029\ \};}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00036\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00037\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classComponent}{Component}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{structIComponent}{IComponent}}\ \{}
\DoxyCodeLine{00038\ \textcolor{keyword}{public}:\ }
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classComponent_a44ecd04a89b4c110f6915985eef6fe68}{GetId}}()\ \{}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id}\ =\ \mbox{\hyperlink{structIComponent_a91f6e53a91bbb5ae97b2fef28c686b05}{nextId}}++;}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ id;}
\DoxyCodeLine{00046\ \ \ \ \ \}}
\DoxyCodeLine{00047\ \};}
\DoxyCodeLine{00048\ }
\DoxyCodeLine{00053\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classEntity}{Entity}}\ \{}
\DoxyCodeLine{00054\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keywordtype}{int}\ id;}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00063\ \ \ \ \ \mbox{\hyperlink{classEntity_ac98bd610e0299cc2aa0538fb2884ab69}{Entity}}(\textcolor{keywordtype}{int}\ \textcolor{keywordtype}{id})\ :\ id(id)\ \{\}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classEntity_a478be4b3bc1cc77e5fd92a7dda6689a4}{GetId}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00074\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEntity_ab0a890ba55c9bc5830c021ace6ac3908}{Kill}}();}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEntity_abeedd2b9ad7b200acca5ac2522607fad}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEntity}{Entity}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{id}\ ==\ other.id;\ \}}
\DoxyCodeLine{00082\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEntity_ae2bb991352e76415d09f30aa69d6b9f4}{operator!=}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEntity}{Entity}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{id}\ !=\ other.id;\ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEntity_abd34ebda09449554a8be0aa19106c08e}{operator>}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEntity}{Entity}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{id}\ >\ other.id;\ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEntity_ae1b49cec9466a32749a951c2ed864b7f}{operator<}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classEntity}{Entity}}\&\ other)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \textcolor{keywordtype}{id}\ <\ other.id;\ \}}
\DoxyCodeLine{00103\ }
\DoxyCodeLine{00110\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent,\ \textcolor{keyword}{typename}...\ TArgs>}
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEntity_a125342c7309de6be6e518da6bffb7452}{AddComponent}}(TArgs\&\&...\ args);}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEntity_ae0a4dce2a3d4a1d8025b6ae037a6624f}{RemoveComponent}}();}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00126\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEntity_a21a5c382bca76fadf22668d51439f3a6}{HasComponent}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00134\ \ \ \ \ TComponent\&\ \mbox{\hyperlink{classEntity_ac79960abe9d3005efc7ce39ebedc0776}{GetComponent}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00137\ \ \ \ \ \textcolor{keyword}{class\ }\mbox{\hyperlink{classRegistry}{Registry}}*\ \mbox{\hyperlink{classEntity_a80cc8ec12331e7aaec78d2b6cae9a6a7}{registry}};}
\DoxyCodeLine{00138\ \};}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00144\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classSystem}{System}}\ \{}
\DoxyCodeLine{00145\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00147\ \ \ \ \ Signature\ componentSignature;}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00150\ \ \ \ \ std::vector<Entity>\ entities;}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00156\ \ \ \ \ \mbox{\hyperlink{classSystem_a7ffb94a5a2db03014de0a8440f0cee3a}{System}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00161\ \ \ \ \ \mbox{\hyperlink{classSystem_abca337cbfb742e1abea5624d9b36f7e5}{\string~System}}()\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00162\ }
\DoxyCodeLine{00167\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSystem_a36b3396cdb8fa107bd4515382fbb8847}{AddEntityToSystem}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity);}
\DoxyCodeLine{00168\ }
\DoxyCodeLine{00173\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSystem_a05a2e9d96800e05c3d4c8d7ebfd9903b}{RemoveEntityFromSystem}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity);}
\DoxyCodeLine{00174\ }
\DoxyCodeLine{00179\ \ \ \ \ std::vector<Entity>\ \mbox{\hyperlink{classSystem_aec0388b6db4900c4d4a9e1dea0f09205}{GetSystemEntities}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00185\ \ \ \ \ \textcolor{keyword}{const}\ Signature\&\ \mbox{\hyperlink{classSystem_af97298c27dfe2231ab21bdb1a0316dc4}{GetComponentSignature}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00191\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>\ }
\DoxyCodeLine{00192\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{RequireComponent}}();}
\DoxyCodeLine{00193\ \};}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00199\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classRegistry}{Registry}}\ \{}
\DoxyCodeLine{00200\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordtype}{int}\ numEntity\ =\ 0;}
\DoxyCodeLine{00203\ }
\DoxyCodeLine{00205\ \ \ \ \ std::vector<std::shared\_ptr<IPool>>\ componentsPools;}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00208\ \ \ \ \ std::vector<Signature>\ entityComponentSignatures;}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00211\ \ \ \ \ std::unordered\_map<std::type\_index,\ std::shared\_ptr<System>>\ systems;}
\DoxyCodeLine{00212\ }
\DoxyCodeLine{00214\ \ \ \ \ std::set<Entity>\ entitiesToBeAdded;}
\DoxyCodeLine{00215\ }
\DoxyCodeLine{00217\ \ \ \ \ std::set<Entity>\ entitiesToBeKilled;}
\DoxyCodeLine{00218\ }
\DoxyCodeLine{00220\ \ \ \ \ std::deque<int>\ freeIds;}
\DoxyCodeLine{00221\ }
\DoxyCodeLine{00222\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00226\ \ \ \ \ \mbox{\hyperlink{classRegistry_acb15d8aa051bf36ea92a86ee6c00bc3c}{Registry}}();}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00231\ \ \ \ \ \mbox{\hyperlink{classRegistry_ac28e339aef39d9d97f1975623c8d8314}{\string~Registry}}();}
\DoxyCodeLine{00232\ }
\DoxyCodeLine{00236\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a21eec592a9c1fee90f18796f07fd9ad8}{Update}}();}
\DoxyCodeLine{00237\ }
\DoxyCodeLine{00242\ \ \ \ \ \mbox{\hyperlink{classEntity}{Entity}}\ \mbox{\hyperlink{classRegistry_ae36c6bd54bef0eb69a0083b371a64d65}{CreateEntity}}();}
\DoxyCodeLine{00243\ }
\DoxyCodeLine{00248\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a037ed17399c2adc565abb9465fea5e0b}{KillEntity}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity);}
\DoxyCodeLine{00249\ }
\DoxyCodeLine{00257\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent,\ \textcolor{keyword}{typename}...\ TArgs>}
\DoxyCodeLine{00258\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_af83a9dbdfa3690c9fa030a45f815a4ed}{AddComponent}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity,\ TArgs\&\&...\ args);}
\DoxyCodeLine{00259\ }
\DoxyCodeLine{00265\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00266\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a983d52e579dde04607b487ed3dc800ee}{RemoveComponent}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity);}
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00274\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00275\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRegistry_a546f2f77b638e76348213fb05ab0c125}{HasComponent}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00276\ }
\DoxyCodeLine{00283\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00284\ \ \ \ \ TComponent\&\ \mbox{\hyperlink{classRegistry_a97595f0490bb3f6439f66d89ae31a4a7}{GetComponent}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00285\ }
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TSystem,\ \textcolor{keyword}{typename}...\ TArgs>}
\DoxyCodeLine{00293\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a782e56e2f62766b38436ca408c6e2a9f}{AddSystem}}(TArgs\&\&...\ args);}
\DoxyCodeLine{00294\ }
\DoxyCodeLine{00299\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TSystem>}
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a8dba180c0abfb4fde4dc0e8e02b92c98}{RemoveSystem}}();}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00307\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TSystem>}
\DoxyCodeLine{00308\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{HasSystem}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00309\ }
\DoxyCodeLine{00315\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TSystem>}
\DoxyCodeLine{00316\ \ \ \ \ TSystem\&\ \mbox{\hyperlink{classRegistry_a3fc393f847176146d1cb0a8c2b683874}{GetSystem}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00317\ }
\DoxyCodeLine{00322\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_adf23fc49a82ee4c382463d3d40626605}{AddEntityToSystems}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity);}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00328\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_af148a233165c929304b3ac1b55a03b41}{RemoveEntityFromSystems}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity);}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00336\ \ \ \ \ std::vector<Entity>\ \mbox{\hyperlink{classRegistry_a400fd43900913308275c9a0a736bdb8f}{GetEntitiesFromSystem}}();}
\DoxyCodeLine{00337\ }
\DoxyCodeLine{00341\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a8240ef787e32a6ceba79519758de5a34}{ClearAllEntities}}();}
\DoxyCodeLine{00342\ \};}
\DoxyCodeLine{00343\ }
\DoxyCodeLine{00348\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00349\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classSystem_ac15b3d09b3f3c485af1364255f21dbd5}{System::RequireComponent}}()\ \{}
\DoxyCodeLine{00350\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ componentId\ =\ \mbox{\hyperlink{classComponent_a44ecd04a89b4c110f6915985eef6fe68}{Component<TComponent>::GetId}}();}
\DoxyCodeLine{00351\ \ \ \ \ componentSignature.set(componentId);}
\DoxyCodeLine{00352\ \}}
\DoxyCodeLine{00353\ }
\DoxyCodeLine{00359\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00360\ std::vector<Entity>\ \mbox{\hyperlink{classRegistry_a400fd43900913308275c9a0a736bdb8f}{Registry::GetEntitiesFromSystem}}()\ \{}
\DoxyCodeLine{00361\ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{HasSystem<T>}}())\ \textcolor{keywordflow}{return}\ \{\};}
\DoxyCodeLine{00362\ }
\DoxyCodeLine{00363\ \ \ \ \ \textcolor{keyword}{auto}\&\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{systemDerived}}\ =\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{GetSystem<T>}}();}
\DoxyCodeLine{00364\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{systemDerived}}.GetSystemEntities();}
\DoxyCodeLine{00365\ \}}
\DoxyCodeLine{00366\ }
\DoxyCodeLine{00374\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent,\ \textcolor{keyword}{typename}...\ TArgs>}
\DoxyCodeLine{00375\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_af83a9dbdfa3690c9fa030a45f815a4ed}{Registry::AddComponent}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity,\ TArgs\&\&...\ args)\ \{}
\DoxyCodeLine{00376\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}\ =\ \mbox{\hyperlink{classComponent_a44ecd04a89b4c110f6915985eef6fe68}{Component<TComponent>::GetId}}();}
\DoxyCodeLine{00377\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}}\ =\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entity}}.GetId();}
\DoxyCodeLine{00378\ }
\DoxyCodeLine{00379\ \ \ \ \ \textcolor{keywordflow}{if}\ (\textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{long}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\textcolor{keyword}{>}(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}})\ >=\ componentsPools.size())\ \{}
\DoxyCodeLine{00380\ \ \ \ \ \ \ \ \ componentsPools.resize(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}\ +\ 10,\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00381\ \ \ \ \ \}}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00383\ \ \ \ \ \textcolor{keywordflow}{if}\ (!componentsPools[\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}])\ \{}
\DoxyCodeLine{00384\ \ \ \ \ \ \ \ \ std::shared\_ptr<Pool<TComponent>>\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{newComponentPool}}\ =\ std::make\_shared<Pool<TComponent>>();}
\DoxyCodeLine{00385\ \ \ \ \ \ \ \ \ componentsPools[\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}]\ =\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{newComponentPool}};}
\DoxyCodeLine{00386\ \ \ \ \ \}}
\DoxyCodeLine{00387\ }
\DoxyCodeLine{00388\ \ \ \ \ std::shared\_ptr<Pool<TComponent>>\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentPool}}\ }
\DoxyCodeLine{00389\ \ \ \ \ \ \ \ \ =\ std::static\_pointer\_cast<Pool<TComponent>>(componentsPools[\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}]);\ }
\DoxyCodeLine{00390\ \ \ \ \ }
\DoxyCodeLine{00391\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}}\ >=\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentPool}}-\/>GetSize())\ \{}
\DoxyCodeLine{00392\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentPool}}-\/>Resize(numEntity\ +\ 100);}
\DoxyCodeLine{00393\ \ \ \ \ \}\ }
\DoxyCodeLine{00394\ }
\DoxyCodeLine{00395\ \ \ \ \ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{TComponent}}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{newComponent}}(std::forward<TArgs>(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{args}})...);}
\DoxyCodeLine{00396\ \ \ \ \ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentPool}}-\/>Set(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}},\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{newComponent}});}
\DoxyCodeLine{00397\ \ \ \ \ entityComponentSignatures[\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}}].set(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}});}
\DoxyCodeLine{00398\ \}}
\DoxyCodeLine{00399\ }
\DoxyCodeLine{00405\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00406\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a983d52e579dde04607b487ed3dc800ee}{Registry::RemoveComponent}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity)\ \{}
\DoxyCodeLine{00407\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}\ =\ \mbox{\hyperlink{classComponent_a44ecd04a89b4c110f6915985eef6fe68}{Component<TComponent>::GetId}}();}
\DoxyCodeLine{00408\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}}\ =\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entity}}.GetId();}
\DoxyCodeLine{00409\ }
\DoxyCodeLine{00410\ \ \ \ \ entityComponentSignatures[\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}}].set(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}},\ \textcolor{keyword}{false});}
\DoxyCodeLine{00411\ \}}
\DoxyCodeLine{00412\ }
\DoxyCodeLine{00419\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00420\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRegistry_a546f2f77b638e76348213fb05ab0c125}{Registry::HasComponent}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00421\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}\ =\ \mbox{\hyperlink{classComponent_a44ecd04a89b4c110f6915985eef6fe68}{Component<TComponent>::GetId}}();}
\DoxyCodeLine{00422\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}}\ =\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entity}}.GetId();}
\DoxyCodeLine{00423\ }
\DoxyCodeLine{00424\ \ \ \ \ \textcolor{keywordflow}{return}\ entityComponentSignatures[\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}}].test(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}});}
\DoxyCodeLine{00425\ \}}
\DoxyCodeLine{00426\ }
\DoxyCodeLine{00433\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00434\ TComponent\&\ \mbox{\hyperlink{classRegistry_a97595f0490bb3f6439f66d89ae31a4a7}{Registry::GetComponent}}(\mbox{\hyperlink{classEntity}{Entity}}\ entity)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00435\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}\ =\ \mbox{\hyperlink{classComponent_a44ecd04a89b4c110f6915985eef6fe68}{Component<TComponent>::GetId}}();}
\DoxyCodeLine{00436\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}}\ =\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entity}}.GetId();}
\DoxyCodeLine{00437\ }
\DoxyCodeLine{00438\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentPool}}\ =\ }
\DoxyCodeLine{00439\ \ \ \ \ \ \ \ \ std::static\_pointer\_cast<Pool<TComponent>>(componentsPools[\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentId}}]);}
\DoxyCodeLine{00440\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{componentPool}}-\/>Get(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{entityId}});}
\DoxyCodeLine{00441\ \}}
\DoxyCodeLine{00442\ }
\DoxyCodeLine{00449\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TSystem,\ \textcolor{keyword}{typename}...\ TArgs>}
\DoxyCodeLine{00450\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a782e56e2f62766b38436ca408c6e2a9f}{Registry::AddSystem}}(TArgs\&\&...\ args)\ \{}
\DoxyCodeLine{00451\ \ \ \ \ std::shared\_ptr<TSystem>\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{newSystem}}\ =\ std::make\_shared<TSystem>(std::forward<TArgs>(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{args}})...);}
\DoxyCodeLine{00452\ \ \ \ \ systems.insert(std::make\_pair(std::type\_index(\textcolor{keyword}{typeid}(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{TSystem}})),\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{newSystem}}));}
\DoxyCodeLine{00453\ \}}
\DoxyCodeLine{00454\ }
\DoxyCodeLine{00459\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TSystem>}
\DoxyCodeLine{00460\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classRegistry_a8dba180c0abfb4fde4dc0e8e02b92c98}{Registry::RemoveSystem}}()\ \{}
\DoxyCodeLine{00461\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{system}}\ =\ systems.find(std::type\_index(\textcolor{keyword}{typeid}(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{TSystem}})));}
\DoxyCodeLine{00462\ \ \ \ \ systems.erase(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{system}});}
\DoxyCodeLine{00463\ \}}
\DoxyCodeLine{00464\ }
\DoxyCodeLine{00470\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TSystem>}
\DoxyCodeLine{00471\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{Registry::HasSystem}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00472\ \ \ \ \ \textcolor{keywordflow}{return}\ systems.find(std::type\_index(\textcolor{keyword}{typeid}(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{TSystem}})))\ !=\ systems.end();}
\DoxyCodeLine{00473\ \}}
\DoxyCodeLine{00474\ }
\DoxyCodeLine{00480\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TSystem>}
\DoxyCodeLine{00481\ TSystem\&\ \mbox{\hyperlink{classRegistry_a3fc393f847176146d1cb0a8c2b683874}{Registry::GetSystem}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00482\ \ \ \ \ \textcolor{keyword}{auto}\ \mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{system}}\ =\ systems.find(std::type\_index(\textcolor{keyword}{typeid}(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{TSystem}})));}
\DoxyCodeLine{00483\ \ \ \ \ \textcolor{keywordflow}{return}\ *(std::static\_pointer\_cast<TSystem>(\mbox{\hyperlink{classRegistry_ad391a4b83ef897f5a702c3b642af9b48}{system}}-\/>second));}
\DoxyCodeLine{00484\ \}}
\DoxyCodeLine{00485\ }
\DoxyCodeLine{00492\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent,\ \textcolor{keyword}{typename}...\ TArgs>}
\DoxyCodeLine{00493\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEntity_a125342c7309de6be6e518da6bffb7452}{Entity::AddComponent}}(TArgs\&\&...\ args)\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \mbox{\hyperlink{classEntity_a80cc8ec12331e7aaec78d2b6cae9a6a7}{registry}}-\/>\mbox{\hyperlink{classRegistry_af83a9dbdfa3690c9fa030a45f815a4ed}{AddComponent}}<TComponent>(*\textcolor{keyword}{this},\ std::forward<TArgs>(args)...);}
\DoxyCodeLine{00495\ \}}
\DoxyCodeLine{00496\ }
\DoxyCodeLine{00501\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00502\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classEntity_ae0a4dce2a3d4a1d8025b6ae037a6624f}{Entity::RemoveComponent}}()\ \{}
\DoxyCodeLine{00503\ \ \ \ \ \mbox{\hyperlink{classEntity_a80cc8ec12331e7aaec78d2b6cae9a6a7}{registry}}-\/>\mbox{\hyperlink{classRegistry_a983d52e579dde04607b487ed3dc800ee}{RemoveComponent}}<TComponent>(*this);}
\DoxyCodeLine{00504\ \}}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00511\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00512\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classEntity_a21a5c382bca76fadf22668d51439f3a6}{Entity::HasComponent}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00513\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classEntity_a80cc8ec12331e7aaec78d2b6cae9a6a7}{registry}}-\/>\mbox{\hyperlink{classRegistry_a546f2f77b638e76348213fb05ab0c125}{HasComponent}}<TComponent>(*this);}
\DoxyCodeLine{00514\ \}}
\DoxyCodeLine{00515\ }
\DoxyCodeLine{00521\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TComponent>}
\DoxyCodeLine{00522\ TComponent\&\ \mbox{\hyperlink{classEntity_ac79960abe9d3005efc7ce39ebedc0776}{Entity::GetComponent}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00523\ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classEntity_a80cc8ec12331e7aaec78d2b6cae9a6a7}{registry}}-\/>\mbox{\hyperlink{classRegistry_a97595f0490bb3f6439f66d89ae31a4a7}{GetComponent}}<TComponent>(*this);}
\DoxyCodeLine{00524\ \}}
\DoxyCodeLine{00525\ }
\DoxyCodeLine{00526\ \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
